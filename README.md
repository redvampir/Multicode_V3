# Multicode

Перед началом работы обязательно ознакомьтесь с [RULES.md](RULES.md). Инструкции для работы с искусственным ассистентом Codex находятся в [docs/assistant_manual.md](docs/assistant_manual.md).

## Оглавление

- [Обзор](#обзор)
- [Архитектура](#архитектура)
- [Особенности](#особенности)
- [Список возможностей](docs/features.md)
- [Мета-комментарии](#мета-комментарии)
- [Локализация](#локализация)
- [Модули](#модули)
- [Руководство по плагинам](#руководство-по-плагинам)
- [Глоссарий](#глоссарий)
- [Структура репозитория](#структура-репозитория)
- [Windows prerequisites](#windows-prerequisites)
- [Быстрый старт](#быстрый-старт)
- [Стандартные проверки](#стандартные-проверки)
- [Лицензия](#лицензия)
- [Ручное тестирование](#ручное-тестирование)

## Обзор
Multicode V3 — редактор исходного кода, объединяющий текстовое и визуальное представления программ. Пользователь свободно переключается между режимами и может работать с дополнительными метаданными без изменения логики кода.

Проект поставляется как автономное десктоп‑приложение и не требует запуска web‑сервера.

## Архитектура
![Архитектура](docs/architecture.svg)
 
Состав компонентов описан в [docs/modules.md](docs/modules.md).

## Особенности

Multicode объединяет текстовый и визуальный редакторы, поддерживает плагины и локализацию. Подробный список возможностей см. в [docs/features.md](docs/features.md).

## Мета-комментарии

Редактор поддерживает хранение дополнительных данных в коде с помощью специальных комментариев. Подробнее см. [docs/meta-comments.md](docs/meta-comments.md).

## Локализация

Интерфейс и плагины можно переводить на разные языки. Возможности
`core::i18n`, правила добавления строк и [план интеграции перевода в
`desktop`](docs/localization.md#план-интеграции-перевода-в-desktop)
описаны в [docs/localization.md](docs/localization.md).

## Модули

Ядро построено из опциональных модулей, подключаемых через флаги Cargo. Список модулей приведён в [docs/modules.md](docs/modules.md).

## Руководство по плагинам

Редактор поддерживает визуальные плагины. Примеры и инструкции доступны в [docs/plugin-guide.md](docs/plugin-guide.md).

## Глоссарий

Основные термины проекта собраны в [docs/glossary.md](docs/glossary.md).

## Структура репозитория

Описание каталогов проекта приведено в [docs/repo-structure.md](docs/repo-structure.md).

## Windows prerequisites

Для сборки на Windows через окружение MSYS2 установите следующие пакеты:

- `gtk3`
- `pkg-config`
- `glib2`
- `cairo`
- `pango`

Используйте следующую команду в терминале MSYS2:

```bash
pacman -S --noconfirm mingw-w64-x86_64-gtk3 pkg-config
```

Убедитесь, что путь `MSYS2\mingw64\bin` добавлен в переменную окружения `PATH`.

## Быстрый старт

```bash
npm run desktop:start                 # запуск приложения
cargo run -p desktop                  # запуск приложения без npm
cargo test -p core                    # тесты ядра
cargo build --release -p desktop      # релизная сборка
```

Для выборочной сборки ядра с дополнительными возможностями:

```bash
cargo build -p core --no-default-features --features "git,watch"
```

## Стандартные проверки

Перед отправкой изменений убедитесь, что основные проверки проходят без ошибок:

```bash
cargo fmt -- --check
cargo clippy -- -D warnings
cargo test
cargo audit
```

## Лицензия
Проект распространяется по лицензии MIT. Полный текст приведён в файле [LICENSE](LICENSE).

## Ручное тестирование

Сценарии ручной проверки описаны в [NODE_EDITOR_MANUAL_TESTS.md](NODE_EDITOR_MANUAL_TESTS.md).

```bash
cargo run -p desktop -- examples/test.js
```

