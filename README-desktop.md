# Multicode Desktop

Десктопная версия Multicode работает полностью автономно и не требует запуска web‑сервера на `localhost`.

Основные термины описаны в [docs/glossary.md](docs/glossary.md).

## Оглавление

- [Разработка](#разработка)
- [Настройки и привязки](#настройки-и-привязки)
- [Сочетания клавиш](#сочетания-клавиш)
- [Скрипты упаковки](#скрипты-упаковки)
- [Расположение данных во время работы](#расположение-данных-во-время-работы)

## Разработка

1. Установите [Rust](https://www.rust-lang.org) и [Node.js](https://nodejs.org).
2. В корне проекта выполните:

   ```sh
   npm install
   npm run setup
   ```

3. Запустите приложение:

   ```sh
   cargo run -p desktop
   ```

   При необходимости дополнительные функции ядра можно подключать через флаги, например `--features "git,watch"`.

   После запуска появится окно выбора проекта (Project Picker).
   Чтобы открыть каталог проекта, нажмите кнопку **Open folder / Открыть папку** и выберите нужную директорию.
   Для открытия проекта на основе отдельного файла нажмите **Open file / Открыть файл** и укажите нужный файл.

   Например, чтобы начать работу с каталогом `~/projects/demo`, откройте Project Picker,
   нажмите **Open folder**, затем выберите `~/projects/demo`.

## Настройки и привязки

Окно настроек доступно из главного окна приложения — нажмите кнопку **Settings / Настройки**.
Все параметры сохраняются в файле `settings.json` в системном каталоге конфигурации,
например `~/.config/multicode/multicode/settings.json`.

Чтобы изменить привязки клавиш, отредактируйте раздел `hotkeys` в этом файле.
Каждый хоткей описывается полями `key`, `ctrl`, `alt` и `shift`,
формирующими комбинацию без учёта регистра символов.
Для буквенных клавиш рекомендуется использовать хотя бы один модификатор
(`Ctrl`, `Alt` или `Shift`).

Каждая комбинация должна быть уникальной: при совпадении нескольких привязок
будет выполнено только первое подходящее действие. После изменения файла
перезапустите приложение.

## Сочетания клавиш

Приложение обрабатывает стандартные сочетания клавиш для работы с файлами.
По умолчанию доступны следующие комбинации:

| Действие             | Сочетание |
| -------------------- | --------- |
| Создание файла       | `Ctrl+N`  |
| Сохранение файла     | `Ctrl+S`  |
| Переименование файла | `F2`      |
| Удаление файла       | `Del`     |

Эти сочетания можно изменить через раздел [«Настройки и привязки»](#настройки-и-привязки).

## Скрипты упаковки

Все артефакты сохраняются в каталоге `dist/`.

### Windows

```sh
iscc scripts/installer.iss
```

### macOS

```sh
bash scripts/macos_bundle.sh
```

### Linux (AppImage)

```sh
bash scripts/build_appimage.sh
```

## Расположение данных во время работы

- Настройки пользователя: системный каталог конфигурации, например `~/.config/multicode/multicode/settings.json`.
- Журналы: системный каталог данных, `multicode/logs/debug.log` (например `~/.local/share/multicode/logs/debug.log`).

Эти пути определяются автоматически через стандартные механизмы ОС.

