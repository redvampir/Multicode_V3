# Процесс разработки

Документ описывает договорённости команды по работе с репозиторием. Он дополняет материалы из `README.md` и служит справочником для новых участников.

## Оглавление

1. [Жизненный цикл задачи](#жизненный-цикл-задачи)
2. [Работа с ветками](#работа-с-ветками)
   1. [Защита main](#защита-main)
   2. [Очередь слияний](#очередь-слияний)
3. [Настройки среды](#настройки-среды)
4. [Документация и стиль](#документация-и-стиль)
5. [Инфраструктура CI](#инфраструктура-ci)
6. [Решение инцидентов](#решение-инцидентов)

## Жизненный цикл задачи

1. Задача попадает в бэклог и описывается с критериями готовности.
2. На планировании команда выбирает задачи в спринт, назначает ответственных и определяет метрики успеха.
3. Разработчик заводит ветку `feature/<issue-id>-<slug>`, подготавливает изменения и пишет тесты.
4. После локальной проверки (`cargo test`, `npm run format:check`, `pre-commit run --all-files`) создаётся PR с чек-листом.
5. После ревью и прохождения CI PR попадает в очередь слияний и автоматически вливается в `main`.

## Работа с ветками

### Защита main

- Запрет `force-push` и прямых коммитов.
- Обязательное прохождение всех GitHub Actions.
- Минимум один аппрув от код-ревьюера.
- Автоматическая отмена аппрува при появлении новых коммитов.

### Очередь слияний

- Используем GitHub Merge Queue, которая объединяет несколько PR и прогоняет тесты на итоговом состоянии.
- Для высокоприоритетных исправлений доступна команда `/priority merge` в комментариях PR.
- Максимальный размер очереди — 10 PR, чтобы не блокировать релизы.

## Настройки среды

- `.editorconfig` определяет отступы, кодировки и финальные переводы строк.
- В dev-контейнер включены Node.js 18, Rust stable и Python 3.11.
- Проверка окружения выполняется скриптом `npm run check-env`.

## Документация и стиль

- Вся текстовая документация хранится в каталоге `Документы/`.
- Форматирование Markdown выполняется через Prettier с конфигом `.prettierrc.cjs`.
- Таблицы и списки оформляются согласно рекомендациям из [«Усиление защиты от конфликтов»](Усиление%20защиты%20от%20конфликтов.md#обзор-инициатив).

## Инфраструктура CI

- Workflow `.github/workflows/ci.yml` запускает Rust и Node проверки на всех платформах.
- Дополнительный шаг `npm run format:check` контролирует соответствие документации правилам форматирования.
- Логи собираются в артефакты и хранятся 14 дней для аудита.

## Решение инцидентов

1. Зафиксировать проблему в трекере с тегом `ci-incident`.
2. Провести анализ корневой причины и определить недостающие проверки.
3. Обновить документацию (включая данный документ) и провести обучение команды.
